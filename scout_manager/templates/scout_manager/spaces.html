{% extends "scout_manager/base.html" %}
{% load staticfiles %}

{% block title %}Spaces{% endblock %}

{% block web_content %}

<div class="mgr-content-header clearfix">

    <h2 {% if is_desktop %}class="pull-left"{% endif%} id="sub_header">{% if app_type %}{{ app_type }}{% else %}All{% endif %} Spaces</h2>

    <div {% if is_desktop %}class="pull-right"{% endif%}>
        <div class="pull-left" style="margin-right:20px;">Total <span class="visually-hidden">spaces in list</span>: <span class="">{{ count }}</span></div>
        <div class="pull-right">
            Display: <a class="btn btn-default btn-xs" href="/manager/spaces/?app_type={{ app_type }}" title="Show all spaces">all</a> <a class="btn btn-default btn-xs" href="/manager/spaces/?app_type={{ app_type }}&is_published=true" title="Show only published spaces">published</a> <a class="btn btn-default btn-xs" href="/manager/spaces/?app_type={{ app_type }}&is_published=false" title="Show unpublished spaces">Draft</a>
        </div>
    </div>

</div>

<div style="margin-top: 15px;" class="table-responsive">
    <table class="table" id="sortable_datatables">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Campus</th>
                <th>Building</th>
                <th>Space type</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>

            {% for spot in spots %}
            <tr data-spotid="{{ spot.spot_id }}" data-etag="{{ spot.etag }}">
                <td><a href="/manager/spaces/{{ spot.spot_id }}/" title="Manage {{ spot.name }} ({% if spot.is_hidden %}DRAFT{% else %}PUBLISHED{% endif %})">{{ spot.spot_id }}</a></td>
                <td><strong>{{ spot.name }}</strong></td>
                <td>{% if spot.campus %}{{ spot.campus }}{% else %}<small class="text-danger">missing</small>{% endif %}</td>
                <td>{% if spot.building_name %}{{ spot.building_name }}{% else %}<small class="text-danger">missing</small>{% endif %}</td>
                <td>{% for type in spot.spot_types %}{{ type.name }}{% if not forloop.last %},{% endif %} {% empty %}<small class="text-danger">missing</small>{% endfor %}</td>
                <td>{% if spot.is_hidden %}DRAFT{% else %}PUBLISHED{% endif %}</td>
            </tr>
            {% empty %}
            You don't manage any {% if app_type %}{{ app_type }} {% endif %}spaces. <a href="/manager/spaces/add/" role="button" title="Create new space"><i class="fa fa-plus" aria-hidden="true"></i> Add New Space</a><br/> If you should have management access to {% if app_type %}{{ app_type }} {% endif %}spaces, <a href="mailto:help@uw.edu">contact us</a>.
            {% endfor %}

        </tbody>
    </table>
</div>

{% endblock %}
